{{define "editmaya"}}
{{template "head"}}
<body>
{{template "navbar" .}}
<!--dropzone-->
<div class="container p-4">
    <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
        <div class="pt-3 pb-3">
            <h2 class="text-muted">Edit Maya Details</h2>
        </div>
        <div class="">
            {{$dIndex := 0}}
            {{range $dataFile := .DataFiles}}
                <input type="hidden" id="datafile{{$dIndex}}" name="datafile{{$dIndex}}" value="{{$dataFile}}">
                {{$dIndex = add $dIndex 1}}
            {{end}}
            <input type="hidden" id="datafileNum" name="datafileNum" value="{{$dIndex}}">
            <button id="btn-upload-file" class="btn btn-sm btn-outline-secondary float-right">업로드</button>
            <form id="mayaDropzone" action="/editmaya-datafile" method="post" class="dropzone" enctype="multipart/form-data">
                <div class="fallback">
                    <input name="file" type="file"/>
                </div>
            </form>
            <small class="form-text text-muted">업로드할 마야파일, 썸네일, 동영상을 Drag & Drop 해주세요.</small>
        </div>
    </div>
</div>
<form action="/editmaya-submit" method="post">
    <input type="hidden" id="id" name="id" value="{{.ID.Hex}}">
    <input type="hidden" id="itemtype" name="itemtype" value="{{.ItemType}}">
    <input type="hidden" id="rmdatafilesNum" name="rmdatafilesNum" value="0">
    <div id="rmdatafiles"></div>
    <div class="container p-4">
        <div class="col-lg-6 col-md-8 col-sm-12 mx-auto">
            <div class="row">
                <div class="col-sm">
                    <div class="form-group">
                        <label class="text-muted">Title</label>
                        <input type="text" name="title" class="form-control" placeholder="에셋 제목" value="{{.Title}}">
                        <small class="form-text text-muted">에셋 제목을 입력해주세요.</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="form-group">
                        <label class="text-muted">Author</label>
                        <input type="text" id="author" name="author" class="form-control" placeholder="에셋 제작자 이름" value="{{.Author}}">
                        <small class="form-text text-muted">에셋 제작자 이름을 적어주세요.</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="form-group">
                        <label class="text-muted">Description</label>
                        <textarea id="description" name="description" class="form-control" rows="5">{{.Description}}</textarea>
                        <small class="form-text text-muted">에셋 사용시 참고해야할 사항</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="form-group">
                        <label class="text-muted">Tags</label>
                        <input type="text" id="tags" name="tags" class="form-control" placeholder="자동차 하늘" value="{{Tags2str .Tags}}">
                        <small class="form-text text-muted">태그를 입력하세요. 태그는 띄어쓰기 또는 쉼표로 구분합니다.</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm">
                    <div class="form-group">
                        <label class="text-muted">Attributes</label>
                        <div id="attributes">
                            {{$index := 0}}
                            {{range $key, $value := .Attributes}}
                                <div class="row mb-2">
                                    <div class="col">
                                        <div class="form-group p-0 m-0">
                                            <input type="text" class="form-control" placeholder="key" value="{{$key}}" id="key{{$index}}" name="key{{$index}}">
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form-group p-0 m-0">
                                            <input type="text" class="form-control" placeholder="value" value="{{$value}}" id="value{{$index}}" name="value{{$index}}">
                                        </div>			
                                    </div>
                                </div>
                                {{$index = add $index 1}}
                            {{end}}
                        </div>
                        <div class="row">
                            <input type="hidden" id="attributesNum" name="attributesNum" value="{{$index}}">
                            <div class="col">
                                <small class="form-text text-muted float-right">필요시 속성을 추가해 주세요.</small>
                                <br>
                                <span class="add float-right" onclick="addAttribute();">+</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        <div class="text-center pt-5">
            <button type="submit" class="btn btn-outline-warning mt-5">Update</button>
        </div>
    </div>
</form>
{{template "footer"}}
</body>
<!--add javascript-->
<script src="/assets/js/jquery-3.1.1.min.js"></script>
<script src="/assets/bootstrap-4/js/bootstrap.min.js"></script>
<script src="/assets/js/dropzone.js"></script>
<script src="/assets/js/dotori.js"></script>
</html>
{{end}}